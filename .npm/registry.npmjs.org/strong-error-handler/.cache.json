{"_id":"strong-error-handler","_rev":"9-a0a8b19124f3c0a39ac5733b3b9bf2f7","name":"strong-error-handler","description":"Error handler for use in development and production environments.","dist-tags":{"latest":"1.1.1"},"versions":{"1.0.0":{"name":"strong-error-handler","description":"Error handler for use in development and production environments.","license":"MIT","version":"1.0.0","repository":{"type":"git","url":"git+https://github.com/strongloop/strong-error-handler.git"},"main":"lib/handler.js","scripts":{"lint":"eslint .","test":"mocha","posttest":"npm run lint"},"dependencies":{"debug":"^2.2.0","http-status":"^0.2.2"},"devDependencies":{"chai":"^2.1.1","eslint":"^2.5.3","eslint-config-loopback":"^3.0.0","mocha":"^2.1.0","supertest":"^1.1.0"},"gitHead":"6fb9f941b494ca23ca1e4ee1660c4038f0796478","bugs":{"url":"https://github.com/strongloop/strong-error-handler/issues"},"homepage":"https://github.com/strongloop/strong-error-handler#readme","_id":"strong-error-handler@1.0.0","_shasum":"714b4ff6f4b5c6fbbd5ec1efc08514629445ca55","_from":".","_npmVersion":"3.8.6","_nodeVersion":"6.1.0","_npmUser":{"name":"bajtos","email":"mbajtoss@gmail.com"},"dist":{"shasum":"714b4ff6f4b5c6fbbd5ec1efc08514629445ca55","tarball":"https://registry.npmjs.org/strong-error-handler/-/strong-error-handler-1.0.0.tgz"},"maintainers":[{"name":"bajtos","email":"mbajtoss@gmail.com"}],"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/strong-error-handler-1.0.0.tgz_1463758624404_0.9529460538178682"},"directories":{}},"1.0.1":{"name":"strong-error-handler","description":"Error handler for use in development and production environments.","license":"MIT","version":"1.0.1","repository":{"type":"git","url":"git+https://github.com/strongloop/strong-error-handler.git"},"main":"lib/handler.js","scripts":{"lint":"eslint .","test":"mocha","posttest":"npm run lint"},"dependencies":{"debug":"^2.2.0","http-status":"^0.2.2"},"devDependencies":{"chai":"^2.1.1","eslint":"^2.5.3","eslint-config-loopback":"^3.0.0","mocha":"^2.1.0","supertest":"^1.1.0"},"gitHead":"8da15ea4d73c79fa1bfdad15753c38cd231c6118","bugs":{"url":"https://github.com/strongloop/strong-error-handler/issues"},"homepage":"https://github.com/strongloop/strong-error-handler#readme","_id":"strong-error-handler@1.0.1","_shasum":"75acc2639717b652576fc7931f2c01d5eda34c0a","_from":".","_npmVersion":"3.8.6","_nodeVersion":"6.1.0","_npmUser":{"name":"bajtos","email":"mbajtoss@gmail.com"},"dist":{"shasum":"75acc2639717b652576fc7931f2c01d5eda34c0a","tarball":"https://registry.npmjs.org/strong-error-handler/-/strong-error-handler-1.0.1.tgz"},"maintainers":[{"name":"bajtos","email":"mbajtoss@gmail.com"},{"name":"rmg","email":"r.m.graham@gmail.com"}],"_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/strong-error-handler-1.0.1.tgz_1464247483573_0.15652922098524868"},"directories":{}},"1.1.0":{"name":"strong-error-handler","description":"Error handler for use in development and production environments.","license":"MIT","version":"1.1.0","repository":{"type":"git","url":"git+https://github.com/strongloop/strong-error-handler.git"},"main":"lib/handler.js","scripts":{"lint":"eslint .","test":"mocha","posttest":"npm run lint"},"dependencies":{"accepts":"^1.3.3","debug":"^2.2.0","ejs":"^2.4.2","http-status":"^0.2.2","strong-globalize":"^2.6.7"},"devDependencies":{"chai":"^2.1.1","eslint":"^2.13.1","eslint-config-loopback":"^4.0.0","express":"^4.13.4","mocha":"^2.1.0","supertest":"^1.1.0"},"browser":{"strong-error-handler":false},"gitHead":"006d281db1c8b961a930c2bb10c1adfc8c9fe47d","bugs":{"url":"https://github.com/strongloop/strong-error-handler/issues"},"homepage":"https://github.com/strongloop/strong-error-handler#readme","_id":"strong-error-handler@1.1.0","_shasum":"b158b870b49734fb2662eaa0a0a650afe3fd78ee","_from":".","_npmVersion":"3.10.3","_nodeVersion":"6.5.0","_npmUser":{"name":"bajtos","email":"mbajtoss@gmail.com"},"dist":{"shasum":"b158b870b49734fb2662eaa0a0a650afe3fd78ee","tarball":"https://registry.npmjs.org/strong-error-handler/-/strong-error-handler-1.1.0.tgz"},"maintainers":[{"name":"bajtos","email":"mbajtoss@gmail.com"},{"name":"rmg","email":"r.m.graham@gmail.com"}],"_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/strong-error-handler-1.1.0.tgz_1473080571802_0.7895408710464835"},"directories":{}},"1.1.1":{"name":"strong-error-handler","description":"Error handler for use in development and production environments.","license":"MIT","version":"1.1.1","repository":{"type":"git","url":"git+https://github.com/strongloop/strong-error-handler.git"},"main":"lib/handler.js","scripts":{"lint":"eslint .","test":"mocha","posttest":"npm run lint"},"dependencies":{"accepts":"^1.3.3","debug":"^2.2.0","ejs":"^2.4.2","http-status":"^0.2.2","strong-globalize":"^2.6.7"},"devDependencies":{"chai":"^2.1.1","eslint":"^2.13.1","eslint-config-loopback":"^4.0.0","express":"^4.13.4","mocha":"^2.1.0","supertest":"^1.1.0"},"browser":{"strong-error-handler":false},"gitHead":"66173e8fd8e820b17ca1578f60ab1d27987069fe","bugs":{"url":"https://github.com/strongloop/strong-error-handler/issues"},"homepage":"https://github.com/strongloop/strong-error-handler#readme","_id":"strong-error-handler@1.1.1","_shasum":"537899bad867b5fd03eb36eeb83c672c0c40ee87","_from":".","_npmVersion":"3.10.8","_nodeVersion":"4.6.0","_npmUser":{"name":"rmg","email":"r.m.graham@gmail.com"},"dist":{"shasum":"537899bad867b5fd03eb36eeb83c672c0c40ee87","tarball":"https://registry.npmjs.org/strong-error-handler/-/strong-error-handler-1.1.1.tgz"},"maintainers":[{"name":"bajtos","email":"mbajtoss@gmail.com"},{"name":"rmg","email":"r.m.graham@gmail.com"}],"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/strong-error-handler-1.1.1.tgz_1475864338983_0.39496988826431334"},"directories":{}}},"readme":"# strong-error-handler\n\nError handler for use in development (debug) and production environments.\n\n## Production mode\n\n- error responses are purposely left without detail in order to prevent leaking sensitive information.\n- For 5xx errors, the output contains only the status code and the status name from the HTTP specification.\n- For 4xx errors, the output contains the full error message (`error.message`) and the contents of the `details`\n  property (`error.details`). The latter is typically used by `ValidationError` to provide machine-readable details\n  about the validation problems.\n\n## Debug Mode\n\n- Full error stack traces and internal details of any object passed passed as the error will be sent back to the client\n  in the HTTP responses when an error occurs.\n\n## Response Format\n\n- `strong-error-handler` currently supports HTML and JSON responses.\n- When the object is a standard Error object, the string provided by the stack property will be returned in HTML/text\n  responses.\n- When the object is a non-Error object, the result of `util.inspect` will be returned in HTML/text responses.\n- For JSON responses, the result will be an object with all enumerable properties from the object in the response.\n\n## Install\n\n```bash\n$ npm install strong-error-handler\n```\n\n## Usage\n\nIn an express-based application:\n\n```js\nvar express = require('express');\nvar errorHandler = require('strong-error-handler');\n\nvar app = express();\n// setup your routes\n// `options` are set to default values. For more info, see `options` below.\n// app.use(errorHandler({ /* options, see below */ }));\napp.use(errorHandler({debug:true, log:true}));\n\napp.listen(3000);\n```\n\nIn LoopBack applications, add the following entry to your\n`server/middleware.json` file.\n\n```json\n{\n  \"final:after\": {\n    \"strong-error-handler\": {\n      \"params\": {\n       }\n    }\n  }\n}\n```\n\n## Content Type\n\nDepending on the request header's `Accepts`, response will be returned in\n the corresponding content-type, current supported types include:\n- JSON (`json`/`application/json`)\n- HTML (`html`/`text/html`)\n\n*There are plans to support other formats such as Text and XML.*\n\n## Options\n\n#### debug\n\n`boolean`, defaults to `false`.\n\nIf you need to set the environment to development mode, you will need to change the value to `true`.\n\nWhen enabled, HTTP responses include all error properties, including\nsensitive data such as file paths, URLs and stack traces. *See Examples below*\n\n#### log\n\n`boolean`, defaults to `true`.\n\nWhen enabled, all errors are printed via `console.error`. That includes an array of fields (custom error properties)\n that are safe to include in response messages (both 4xx and 5xx).\n\nWhen not enabled, it only sends the error back in the response.\n\nCustomization of the log format is intentionally not allowed. If you would like\nto use a different format/logger, disable this option and add your own custom\nerror-handling middleware.\n\n```js\napp.use(myErrorLogger());\napp.use(errorHandler({ log: false }));\n```\n\n## Migration to strong-error-handler for existing LoopBack applications\n\n1. In package.json dependencies, remove ` \"errorhandler\": \"^x.x.x‚Äù,`\n1. Run `npm install --save strong-error-handler`\n1. In `./server/config.json`, remove:\n\n  ```\n  \"errorHandler\": {\n    \"disableStackTrace\": false\n  }\n  ```\n  and replace it with `\"handleErrors\": false`.\n1. In `server/middleware.json`, remove\n\n  ```\n    \"final:after\": {\n    \"loopback#errorHandler\": {}\n  }\n  ```\n  and replace it with:\n  ```\n  \"final:after\": {\n    \"strong-error-handler\": {}\n  }\n  ```\n1. In the `./server`, delete `middleware.production.json`.\n1. In the `./server`, create `middleware.development.json` containing:\n\n  ```\n  {\n  \"final:after\": {\n    \"strong-error-handler\": {\n      \"params\": {\n        \"debug\": true,\n        \"log\": true\n      }\n    }\n  }\n}\n```\n\n## Examples:\n\nError generated when `debug: false` :\n\n```\n{ error: { statusCode: 500, message: 'Internal Server Error' } }\n```\n\nError generated when `debug: true` :\n\n```\n{ error:\n  { statusCode: 500,\n  name: 'Error',\n  message: 'a test error message',\n  stack: 'Error: a test error message\\n    at Context.<anonymous> (User/strong-error-handler/test/handler.test.js:220:21)\\n    at callFnAsync (User/strong-error-handler/node_modules/mocha/lib/runnable.js:349:8)\\n    at Test.Runnable.run (User/strong-error-handler/node_modules/mocha/lib/runnable.js:301:7)\\n    at Runner.runTest (User/strong-error-handler/node_modules/mocha/lib/runner.js:422:10)\\n    at User/strong-error-handler/node_modules/mocha/lib/runner.js:528:12\\n    at next (User/strong-error-handler/node_modules/mocha/lib/runner.js:342:14)\\n    at User/strong-error-handler/node_modules/mocha/lib/runner.js:352:7\\n    at next (User/strong-error-handler/node_modules/mocha/lib/runner.js:284:14)\\n    at Immediate._onImmediate (User/strong-error-handler/node_modules/mocha/lib/runner.js:320:5)\\n    at tryOnImmediate (timers.js:543:15)\\n    at processImmediate [as _immediateCallback] (timers.js:523:5)' }}\n```\n","maintainers":[{"name":"0candy","email":"ngcandy@ca.ibm.com"},{"name":"amir-61","email":"amirali.jfr61@gmail.com"},{"name":"bajtos","email":"mbajtoss@gmail.com"},{"name":"davidcheung","email":"davidcheung@live.ca"},{"name":"ibmcloud-admin","email":"rmg@ca.ibm.com"},{"name":"jannyhou2016","email":"juehou@ca.ibm.com"},{"name":"loay","email":"gewily@ca.ibm.com"},{"name":"qpresley","email":"qpresley@ca.ibm.com"},{"name":"rfeng","email":"enjoyjava@gmail.com"},{"name":"ritch","email":"skawful@gmail.com"},{"name":"rmg","email":"r.m.graham@gmail.com"},{"name":"superkhau","email":"superkhau@gmail.com"},{"name":"thegman","email":"gpandya@live.com"},{"name":"tonyf-ibm","email":"tffrench@us.ibm.com"}],"time":{"modified":"2016-11-15T18:52:57.140Z","created":"2016-05-20T15:37:06.648Z","1.0.0":"2016-05-20T15:37:06.648Z","1.0.1":"2016-05-26T07:24:45.095Z","1.1.0":"2016-09-05T13:02:54.279Z","1.1.1":"2016-10-07T18:19:00.565Z"},"homepage":"https://github.com/strongloop/strong-error-handler#readme","repository":{"type":"git","url":"git+https://github.com/strongloop/strong-error-handler.git"},"bugs":{"url":"https://github.com/strongloop/strong-error-handler/issues"},"license":"MIT","readmeFilename":"README.md","_attachments":{},"_etag":"W/\"582b5989-301a\"","_lastModified":"Tue, 15 Nov 2016 18:52:57 GMT","_cached":true}